/*!
* basket.js
* v0.5.2 - 2016-05-05
* http://addyosmani.github.com/basket.js
* (c) Addy Osmani;  License
* Created by: Addy Osmani, Sindre Sorhus, Andr√©e Hansson, Mat Scales
* Contributors: Ironsjp, Mathias Bynens, Rick Waldron, Felipe Morais
* Uses rsvp.js, https://github.com/tildeio/rsvp.js
*/
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.libBasketjs=b()}):"object"==typeof exports?module.exports=b():a.basket=b()}(this,function(){var a,b;return a=function(){function a(){var a=this;if(a.promise.result=a.promise.result||arguments[0],!a.promise[i]&&!a.promise[j]){a.promise[i]=!0;for(var b=0;b<a.promise._s.length;b++)a.promise._s[b].call(null,a.promise.result);a.promise._s=[]}}function b(){var a=this;if(a.promise.error=a.promise.error||arguments[0],!a.promise[i]&&!a.promise[j]){a.promise[j]=!0;for(var b=0;b<a.promise._f.length;b++)a.promise._f[b].call(null,a.promise.error);a.promise._f=[]}}function c(e){if(!(this instanceof c))return new c(e);var f=this;f.promise=e&&"then"in e?e:new d(f),f.resolve=function(){return a.apply(f,arguments)},f.reject=function(){return b.apply(f,arguments)}}function d(a){if(this._s=[],this._f=[],this._defer=a&&a instanceof c?a:new c(this),this.result=null,this.error=null,typeof a===h)try{a.call(this,this._defer.resolve,this._defer.reject)}catch(b){this._defer.reject(b)}}function e(a,b){var c=this;return function(){var d=a.apply(c,arguments);d&&typeof d.then===h?d.then(function(){b.resolve.apply(b,arguments)},function(){b.reject.apply(b,arguments)}):b.resolve.apply(b,null==d?[]:[d])}}function f(a,b,c,d,e){return function(f){a[b]=f,e.value++,d.value===e.value&&c(a)}}var g="prototype",h="function",i="resolved",j="rejected";return d[g].then=function(a,b){var d,f,g=new c,k=this;return d=typeof a==h?e.call(k,a,g):g.resolve,k[i]?d.call(null,k.result):k._s.push(d),f=typeof b==h?e.call(k,b,g):g.reject,k[j]?f.call(null,k.error):k._f.push(f),g.promise},c.Promise=d,c.resolve=function(a){var b=new c;return b.resolve(a),b.promise},c.reject=function(a){var b=new c;return b.reject(a),b.promise},c.all=function(a){return new d(function(b,c){for(var d={value:a.length},e={value:0},g=[],h=a.length;h--;)"then"in a[h]?a[h].then(f(g,h,b,d,e),c):(g[h]=a[h],d.value--);return d.value<=0||d.value===e.value?void b(g):void 0})},c}(),b=function(a){var b,c=Function,d=new c("return this")(),e=d.document,f=e.head||e.getElementsByTagName("head")[0],g="basket-",h=5e3,i=[],j=function(a,c){try{return localStorage.setItem(g+a,JSON.stringify(c)),!0}catch(d){if(d.name.toUpperCase().indexOf("QUOTA")>=0){var e,f=[];for(e in localStorage)0===e.indexOf(g)&&f.push(JSON.parse(localStorage[e]));return f.length?(f.sort(function(a,b){return a.stamp-b.stamp}),b.remove(f[0].key),j(a,c)):void 0}return}},k=function(c){var d=new a.Promise(function(a,d){var e=new XMLHttpRequest;e.open("GET",c),e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status&&e.responseText?a({content:e.responseText,type:e.getResponseHeader("content-type")}):d(new Error(e.statusText)))},setTimeout(function(){e.readyState<4&&e.abort()},b.timeout),e.send()});return d},l=function(a,b){var c=+new Date;return a.data=b.content,a.originalType=b.type,a.type=a.type||b.type,a.skipCache=a.skipCache||!1,a.stamp=c,a.expire=c+60*(a.expire||h)*60*1e3,a},m=function(a){return k(a.url).then(function(b){var c=l(a,b);return a.skipCache||j(a.key,c),c})},n=function(a,c){return!a||a.expire-+new Date<0||c.unique!==a.unique||b.isValidItem&&!b.isValidItem(a,c)},o=function(c){var d,e,f;if(c.url)return c.key=c.key||c.url,d=b.get(c.key),c.execute=c.execute!==!1,f=n(d,c),c.live||f?(c.unique&&(c.url+=(c.url.indexOf("?")>0?"&":"?")+"basket-unique="+c.unique),e=m(c),c.live&&!f&&(e=e.then(function(a){return a},function(){return d}))):(d.type=c.type||d.originalType,d.execute=c.execute,e=new a.resolve(d)),e},p=function(a){var b=e.createElement("script");b.defer=!0,b.text=a.data,f.appendChild(b)},q={"default":p},r=function(a){return a.type&&q[a.type]?q[a.type](a):q["default"](a)},s=function(b){for(var c,d=0;d<b.length;d++)c=b[d],c.execute&&r(c);return a.resolve(b)},t=function(){var b,c,d=[];for(b=0,c=arguments.length;c>b;b++)d.push(o(arguments[b]));return a.all(d)},u=function(){var a=t.apply(null,arguments),b=this.then(function(){return a}).then(s);return b.thenRequire=u,b};return b={require:function(){for(var a=0,b=arguments.length;b>a;a++)arguments[a].execute=arguments[a].execute!==!1,arguments[a].once&&i.indexOf(arguments[a].url)>=0?arguments[a].execute=!1:arguments[a].execute!==!1&&i.indexOf(arguments[a].url)<0&&i.push(arguments[a].url);var c=t.apply(null,arguments).then(s);return c.thenRequire=u,c},remove:function(a){return localStorage.removeItem(g+a),this},get:function(a){var b=localStorage.getItem(g+a);try{return JSON.parse(b||"false")}catch(c){return!1}},clear:function(a){var b,c,d=+new Date;for(b in localStorage)c=b.split(g)[1],c&&(!a||this.get(c).expire<=d)&&this.remove(c);return this},isValidItem:null,timeout:5e3,addHandler:function(a,b){Array.isArray(a)||(a=[a]),a.forEach(function(a){q[a]=b})},removeHandler:function(a){b.addHandler(a,void 0)}},b.clear(!0),b}(a)});
//# sourceMappingURL=basket.full.min.js.map